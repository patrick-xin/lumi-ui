{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "morphing-dialog",
  "type": "registry:component",
  "title": "Morphing Dialog",
  "description": "A dialog that morphs from a trigger element.",
  "dependencies": [
    "lucide-react",
    "framer-motion"
  ],
  "registryDependencies": [
    "utils",
    "@lumi-ui/button",
    "@lumi-ui/dialog"
  ],
  "files": [
    {
      "path": "components/examples/components/morphing-dialog.tsx",
      "content": "\"use client\";\n\nimport type { DialogRootActions } from \"@base-ui/react/dialog\";\nimport { Button } from \"@lumi-ui/ui/button\";\nimport {\n  Dialog,\n  DialogBackdrop,\n  DialogClose,\n  DialogPopup,\n  DialogPortal,\n  DialogTitle,\n  DialogViewport,\n} from \"@lumi-ui/ui/dialog\";\nimport { ScrollArea } from \"@lumi-ui/ui/scroll-area\";\nimport { PlusIcon, X } from \"lucide-react\";\nimport { AnimatePresence, LayoutGroup, motion } from \"motion/react\";\nimport Image from \"next/image\";\nimport { useRef, useState } from \"react\";\n\nexport function MorphingDialog() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [activeItem, setActiveItem] = useState<(typeof ITEMS)[0] | null>(null);\n\n  const actionsRef = useRef<DialogRootActions>({\n    close: () => {},\n    unmount: () => {},\n  });\n\n  const handleOpen = (item: (typeof ITEMS)[0]) => {\n    setActiveItem(item);\n    setIsOpen(true);\n  };\n\n  const handleClose = (open: boolean) => {\n    setIsOpen(open);\n  };\n\n  return (\n    <LayoutGroup>\n      <ScrollArea noScrollBar>\n        <div className=\"flex gap-2 max-w-5xl mx-auto mt-12\">\n          {ITEMS.map((item) => (\n            <motion.div\n              className=\"relative group flex flex-col cursor-pointer bg-muted hover:bg-muted/80 transition-colors flex-1 size-80 rounded-md!\"\n              key={item.id}\n              layoutId={`card-container-${item.id}`}\n              onClick={() => handleOpen(item)}\n              style={{\n                opacity: activeItem?.id === item.id && isOpen ? 0 : 1,\n                pointerEvents:\n                  activeItem?.id === item.id && isOpen ? \"none\" : \"auto\",\n              }}\n            >\n              <div className=\"relative h-48 w-full overflow-hidden rounded-t-md\">\n                <motion.div\n                  className=\"w-full h-full\"\n                  layoutId={`image-container-${item.id}`}\n                >\n                  <Image\n                    alt={item.title}\n                    className=\"h-full w-full object-cover brightness-20 dark:grayscale-25\"\n                    height={500}\n                    src={item.image}\n                    width={500}\n                  />\n                </motion.div>\n              </div>\n\n              <div className=\"flex flex-1 p-4 justify-between items-center\">\n                <motion.h3\n                  className=\"text-lg font-semibold\"\n                  layoutId={`title-${item.id}`}\n                  transition={{ duration: 0.2 }}\n                >\n                  {item.title}\n                </motion.h3>\n\n                <Button\n                  className=\"group-hover:bg-accent/20 group-hover:border-transparent rounded-full group-hover:shadow-2xl cursor-pointer\"\n                  onClick={() => handleOpen(item)}\n                  size=\"icon\"\n                  variant=\"outline\"\n                >\n                  <PlusIcon className=\"group-hover:text-foreground text-muted-foreground transition-all\" />\n                </Button>\n              </div>\n            </motion.div>\n          ))}\n        </div>\n      </ScrollArea>\n      <Dialog actionsRef={actionsRef} onOpenChange={handleClose} open={isOpen}>\n        <AnimatePresence mode=\"popLayout\">\n          {isOpen && activeItem && (\n            <DialogPortal keepMounted>\n              <DialogBackdrop />\n\n              <DialogViewport\n                className=\"grid place-items-center p-4 pt-48 sm:pt-32\"\n                hidden={false}\n              >\n                <DialogPopup\n                  className=\"relative w-full max-w-4xl flex flex-col overflow-hidden rounded-md\"\n                  hidden={false}\n                  render={\n                    <motion.div\n                      animate={{ borderRadius: \"10px\" }}\n                      exit={{ borderRadius: \"10px\" }}\n                      initial={{ borderRadius: \"10px\" }}\n                      layoutId={`card-container-${activeItem.id}`}\n                      onLayoutAnimationComplete={() => {\n                        if (!isOpen) {\n                          actionsRef.current?.unmount();\n                          setTimeout(() => setActiveItem(null), 50);\n                        }\n                      }}\n                    />\n                  }\n                >\n                  <ScrollArea className=\"h-[calc(100vh-4rem)]\" noScrollBar>\n                    <motion.div\n                      animate={{ opacity: 1 }}\n                      className=\"flex flex-col h-full pb-32\"\n                      exit={{ opacity: 0 }}\n                      initial={{ opacity: 0 }}\n                      transition={{\n                        duration: 0.15,\n                      }}\n                    >\n                      <div className=\"relative h-64 sm:h-96 w-full shrink-0 overflow-hidden\">\n                        <motion.div\n                          className=\"w-full h-full\"\n                          layoutId={`image-container-${activeItem.id}`}\n                        >\n                          <Image\n                            alt={activeItem.title}\n                            className=\"h-full w-full object-cover brightness-20 dark:grayscale-25\"\n                            height={500}\n                            src={activeItem.image}\n                            width={500}\n                          />\n                        </motion.div>\n                      </div>\n\n                      <div className=\"flex flex-col p-8 max-w-xl justify-center mx-auto text-left\">\n                        <DialogTitle\n                          className=\"text-3xl sm:text-4xl md:text-5xl xl:text-6xl font-bold\"\n                          render={\n                            <motion.h2 layoutId={`title-${activeItem.id}`}>\n                              {activeItem.title}\n                            </motion.h2>\n                          }\n                        />\n\n                        {activeItem.longDescription.map((item, index) => (\n                          <motion.p\n                            animate={{ opacity: 1, y: 0 }}\n                            className=\"mt-4 text-lg text-muted-foreground\"\n                            initial={{ opacity: 0, y: 10 }}\n                            key={index}\n                            transition={{ delay: 0.2 + index * 0.05 }}\n                          >\n                            {item}\n                          </motion.p>\n                        ))}\n                        <div className=\"mt-8\">\n                          <Button>Read full case study</Button>\n                        </div>\n                      </div>\n\n                      <DialogClose\n                        className=\"absolute right-4 top-4 z-20\"\n                        render={\n                          <Button\n                            className=\"rounded-full shadow-lg\"\n                            size=\"icon\"\n                            variant=\"secondary\"\n                          >\n                            <X size={16} />\n                          </Button>\n                        }\n                      />\n                    </motion.div>\n                  </ScrollArea>\n                </DialogPopup>\n              </DialogViewport>\n            </DialogPortal>\n          )}\n        </AnimatePresence>\n      </Dialog>\n    </LayoutGroup>\n  );\n}\n\ntype CardItem = {\n  id: string;\n  title: string;\n  image: string;\n  longDescription: string[];\n};\n\nconst Lorem =\n  \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Sunt voluptatem illum cum impedit temporibus eveniet quibusdam est iusto voluptas laudantium minima delectus cupiditate, quam, repudiandae neque aliquid corporis voluptatibus rem.\";\n\nconst ITEMS: CardItem[] = [\n  {\n    id: \"card-1\",\n    image: \"/images/placeholder.svg\",\n    longDescription: [Lorem, Lorem, Lorem, Lorem, Lorem],\n    title: \"Discoverable\",\n  },\n  {\n    id: \"card-2\",\n    image: \"/images/placeholder.svg\",\n    longDescription: [Lorem, Lorem, Lorem, Lorem, Lorem],\n    title: \"Predictable\",\n  },\n  {\n    id: \"card-3\",\n    image: \"/images/placeholder.svg\",\n    longDescription: [Lorem, Lorem, Lorem, Lorem, Lorem],\n    title: \"Composable\",\n  },\n];\n",
      "type": "registry:component"
    }
  ],
  "categories": [
    "layout-navigation"
  ]
}